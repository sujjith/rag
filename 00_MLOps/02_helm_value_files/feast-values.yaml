feature-server:
  enabled: true
  service:
    type: NodePort
    nodePort: 30656
  image:
    repository: feastdev/feature-server
    tag: 0.40.0
  
  # Inject MinIO credentials
  envOverrides:
    AWS_ACCESS_KEY_ID: minioadmin
    AWS_SECRET_ACCESS_KEY: minioadmin123
    FEAST_S3_ENDPOINT_URL: http://minio.minio.svc.cluster.local:9000
  # Disable probes (grpc-health-probe not in Python image)
  livenessProbe:
    enabled: false
  readinessProbe:
    enabled: false
  # Command to generate config and run server
  command:
    - /bin/sh
    - -c
    - |
      echo "Generating feature_store.yaml..."
      cat <<EOC > feature_store.yaml
      project: feast_project
      provider: local
      registry: "s3://feast-offline/registry.db"
      online_store:
        type: redis
        connection_string: "redis-master.redis.svc.cluster.local:6379"
      offline_store:
        type: file
      EOC
      
      echo "Starting Feast Server..."
      feast serve --host=0.0.0.0 --port=6566
# Disable transformation service (not needed for basic setup)
transformation-service:
  enabled: false
postgresql:
  enabled: false
redis:
  enabled: false
feast:
  local: false
